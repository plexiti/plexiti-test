<!doctype html>
<html lang='de'>
<head>
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,600italic,700,700italic,300italic' rel='stylesheet' type='text/css'>
  <meta charset='utf-8'>
  
  <title>Loslegen mit Camunda BPM Assert Scenario</title>
  
    <link href='https://plexiti.github.io/plexiti-test/de/blog/index.xml' rel='alternate' type='application/rss+xml' title='plexiti - der business programmer blog' />
  
    <link href='https://plexiti.github.io/plexiti-test/de/blog/index.xml' rel='home' type='application/rss+xml' title='plexiti - der business programmer blog' />
  
  <meta name='apple-mobile-web-app-capable' content='yes'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link href='https://plexiti.github.io/plexiti-test/de/animate.css' rel='stylesheet' type='text/css'>
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/de/js/woothemes-FlexSlider-06b12f8/flexslider.css' type='text/css' media='screen'>
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/de/js/prettyPhoto_3.1.5/prettyPhoto.css' type='text/css' media='screen'>
  <link href='https://plexiti.github.io/plexiti-test/de/style.css' rel='stylesheet' type='text/css'>

  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/de/fonts/bariol/plexiti-bariol.css' media='screen' />
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/de/fonts/font-awesome/css/font-awesome.min.css' media='screen'>
  <script src='//code.jquery.com/jquery-latest.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/modernizr.custom.48287.js'></script>
  
  <link rel='shortcut icon' type='image/x-icon' href='https://plexiti.github.io/plexiti-test/de/favicon.ico' />
  <link rel='apple-touch-icon-precomposed' sizes='114x114' href='https://plexiti.github.io/plexiti-test/de/apple-touch-icon-114x114-precomposed.png'>
  <link rel='apple-touch-icon-precomposed' sizes='72x72' href='https://plexiti.github.io/plexiti-test/de/apple-touch-icon-72x72-precomposed.png'>
  <link rel='apple-touch-icon-precomposed' href='https://plexiti.github.io/plexiti-test/de/apple-touch-fa-57x57-precomposed.png'>

  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/moment/moment-with-locales.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/bpmn-js/bpmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/cmmn-js/cmmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/dmn-js/dmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/plexiti.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/lang.js'></script>

  <link href='https://plexiti.github.io/plexiti-test/de/css/plexiti.css' rel='stylesheet' type='text/css'>
  <link href='https://plexiti.github.io/plexiti-test/de/js/dmn-js/css/dmn-js.css' rel='stylesheet' type='text/css'>
  <link href='https://plexiti.github.io/plexiti-test/de/js/rainbow/rainbow-github.css' rel="stylesheet" type="text/css">

</head>
<body data-spy='scroll' data-target='#TableOfContents' data-offset='50'>
<header>
  <div class='top-bg-color-bar'></div>
  <div class='container'>
    <div class='navbar navbar-default' role='navigation'>
      <div class='navbar-header'>
        <a class='navbar-brand' href='https://plexiti.github.io/plexiti-test/de/'>
          <img src='https://plexiti.github.io/plexiti-test/de/img/logo.png' style='width: 250px; height: 96px' title='plexiti'>
          <span class='logo_subtitle' style='font-size: 13pt;'>der business programmer blog</span>
        </a>
      </div>
      <div class='collapse navbar-collapse'>
        <ul class='nav pull-right navbar-nav'>
          
          
            <li><a href='https://plexiti.github.io/plexiti-test/de/blog/'>Blog</a></li>
          
            <li><a href='https://plexiti.github.io/plexiti-test/de/about/'>Über</a></li>
          
        </ul>
      </div>
    </div>
    <div id="social_media_wrapper">
      
      
      
        <a href='.' title='Diese Seite ist auf Deutsch abrufbar.'><i class="fa">de</i></a>
        
          <a href='https://plexiti.github.io/plexiti-test/de/../en/blog/2016/09/get-started-with-camunda-bpm-assert-scenario/' title='This page is available in english.'><i class="fa">en</i></a>
        
        
      
    </div>
  </div>
</header>

<div class='main' id='post'>
     <section class='hgroup'>
          <div class='container'>
               <h1>Loslegen mit Camunda BPM Assert Scenario</h1>
               <h2>Dieser Blog Post ist der erste in einer Serie an Blog Posts, welche das neue Camunda BPM Community Extension Projekt diskutieren werden.<span style='float:right'><script>document.write(moment('2016-09-15').locale('de').format('LL'))</script></span></h2>
          </div>
     </section>
     <section>
          <div class='container'>
               <div class='row'>
                    <div id='leftcol' class='col-sm-12 col-md-8' role='main'>
                         <article class='post'>
                              <div class='post_content'>
                                   

<p>Ich bin wirklich happy das <strong>Maven Central</strong> Release des neuen Camunda BPM Community Extension Projekts <a href="https://github.com/camunda/camunda-bpm-assert-scenario">Camunda BPM Assert Scenario</a> &ldquo;verkünden&rdquo; zu können. Ich plane eine Serie an kleinen Blog Posts zu veröffentlichen, die das Projekt in grösserem Detail beschreiben, und starte heute mit einem wirklich kleinen Projekt, das nur dazu diesen soll mal loslegen zu können. Ich möchte aber auch ein paar Sätze zum &ldquo;Big Picture&rdquo; und den Motivationen hinter dieser Entwicklung loswerden. <i class='fa fa-smile-o' aria-hidden='true'></i></p>

<h1 id="die-motivationen-hinter-assert-scenario">Die Motivationen hinter &ldquo;Assert Scenario&rdquo;</h1>

<p>Camunda BPM Assert Scenario ermöglicht wesentlich <strong>schnellere Prozessentwicklung</strong>, weil es die unnötige, immer und immer wieder notwendig werdende Anpassung von Unit Test Suiten für grössere ausführbare Modelle bei richtiger Anwendung völlig obsolet macht. Wenn ich die Library benutze, dann bemerke ich oftmals zu meinem eigenen Erstaunen, dass nur noch jene Tests &ldquo;brechen&rdquo; von denen ich das auch unbedingt so haben möchte: wenn ich die &ldquo;businessrelevanten&rdquo; Aspekte des Testfalls ändere und eben <strong>was</strong> der Prozess eigentlich erreichen möchte. Andererseits brechen die Testsuiten gar nicht mehr, wenn ich nur die &ldquo;innere Logik&rdquo; eines Modells ändere, also nur <strong>wie</strong> ich die erforderliche &ldquo;Businesssemantik&rdquo; erreiche.</p>

<p>Davon abgesehen, ermöglicht es mir Camunda BPM Assert Scenario realistische <strong>Unit Tests für zeitabhängiges Prozessverhalten</strong> zu schreiben: indem ich Aktionen &ldquo;verschiebe&rdquo; und  die Testszenarien dann in ihre &ldquo;Prozesszukunft&rdquo; &ldquo;vorspule&rdquo;, kann ich zB prüfen wie mehrere Prozessinstanzen oder ganze Bäume an Call Activities zusammenarbeiten. Man bleibt dabei trotzdem immer im Fahrersitz: Camunda BPM Assert Scenario arbeitet im typischen single-treaded Unit Test Environment, womit alles leicht mockbar und kontrollierbar bleibt.</p>

<h1 id="ein-erstes-kleines-projekt-um-loslegen-zu-können">Ein erstes kleines Projekt um loslegen zu können</h1>

<p><strong>Schritt 1</strong>: ein Camunda Maven Projekt erzeugen. Ich habe hier dazu zB den Camunda Maven Archetype benutzt:</p>

<pre><code data-language=''>mvn archetype:generate -DinteractiveMode=false -DarchetypeRepository=https://app.camunda.com/nexus/content/repositories/camunda-bpm -DarchetypeGroupId=org.camunda.bpm.archetype -DarchetypeArtifactId=camunda-archetype-servlet-war -DarchetypeVersion=7.5.0 -DgroupId=org.example.camunda.bpm -DartifactId=camunda-bpm-scenario-testing -Dversion=0.1-SNAPSHOT -Dpackage=org.example.camunda.bpm.scenario</code></pre>
<script src='https://plexiti.github.io/plexiti-test/de/js/rainbow/rainbow-custom.min.js'></script>


<p><strong>Schritt 2</strong>: den &ldquo;Language Level&rdquo; im POM auf Java 1.8 setzen. Das ist zwar nicht &ldquo;notwendig&rdquo; um &ldquo;Assert Scenario&rdquo; zu nutzen, aber es macht definitiv mehr Spass <strong>mit</strong> Lambda Expressions. <i class='fa fa-smile-o' aria-hidden='true'></i></p>

<pre><code data-language='xml'>&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</code></pre>
<script src='https://plexiti.github.io/plexiti-test/de/js/rainbow/rainbow-custom.min.js'></script>


<p><strong>Schritt 3</strong>: die Maven Dependency für &ldquo;Assert Scenario&rdquo; zum pom.xml des Projekts hinzufügen:</p>

<pre><code data-language='xml'>&lt;dependency&gt;
    &lt;groupId&gt;org.camunda.bpm.extension&lt;/groupId&gt;
    &lt;artifactId&gt;camunda-bpm-assert-scenario&lt;/artifactId&gt;
    &lt;version&gt;0.1&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
<script src='https://plexiti.github.io/plexiti-test/de/js/rainbow/rainbow-custom.min.js'></script>


<p>Schliesslich auch Mockito zu den Projekt Dependencies hinzufügen. Wenn man ein anderes Mocking Framework bevorzugt, kann man es gerne nutzen, aber das Beispiel weiter unten benutzt eben Mockito.</p>

<pre><code data-language='xml'>&lt;dependency&gt;
  &lt;groupId&gt;org.mockito&lt;/groupId&gt;
  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
  &lt;version&gt;1.10.19&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
<script src='https://plexiti.github.io/plexiti-test/de/js/rainbow/rainbow-custom.min.js'></script>


<p><strong>Schritt 4</strong>: Das <strong>process.bpmn</strong> im <strong>src/main/resources</strong> Folder mithilfe des Camunda Modeler öffenen und ein paar User Tasks zwischen dem Start und dem End Event einfügen. Ich habe einfach folgendes gemacht:</p>


<div class='bpmn' bpmn='https://plexiti.github.io/plexiti-test/de/./blog/2016/09/src/process.bpmn'>
</div>

<p>Alternativ kann man gerne auch mein <a href="../src/process.bpmn" download="process.bpmn">process.bpmn</a> hier runterladen.</p>

<p><strong>Schritt 5</strong>: Den <strong>InMemoryH2Test.java</strong> im <strong>src/test/java</strong> Folder öffnen. und die <strong>testHappyPath()</strong> Methode anpassen:</p>

<pre><code data-language='java'>@Test
@Deployment(resources = &#34;process.bpmn&#34;)
public void testHappyPath() {

  // GEGEBEN ein Prozess-&#34;scenario&#34;... (dieses hier schliesst einfach alle User Tasks ab)
  ProcessScenario process = Mockito.mock(ProcessScenario.class);
  Mockito.when(process.waitsAtUserTask(Mockito.anyString())).thenReturn((task) -&gt; task.complete());

  // WENN wir das Senario ausführen...
  Scenario scenario = Scenario.run(process).startByKey(&#34;camunda-bpm-scenario-testing&#34;).execute();

  // DANN nehmen wir an, dass wir den End Event erreichen
  Mockito.verify(process).hasFinished(&#34;EndEventProcessEnded&#34;);

  // UND wir wollen auch die Prozessinstanzhistorie visualisieren
  ProcessTestCoverage.calculate(scenario.instance(process), rule.getProcessEngine());

}</code></pre>
<script src='https://plexiti.github.io/plexiti-test/de/js/rainbow/rainbow-custom.min.js'></script>


<p>Obwohl ich es nicht als &ldquo;Best Practice&rdquo; betrachte einfach alle offenen User Tasks abzuschliessen, so wie es in diesem Beispiel gezeigt wird, so kann es doch eine hilfreiche Technik zu sein, um mal schnell mit den eigenen Prozessmodelltests loszulegen. Dieser Test ist nun auszuführen! Er sollte eine Prozessinstanz vom Startereignis bis zum Endereignis laufen lassen und dabei auch einen HTML Output im <strong>target/process-test-coverage</strong> Folder des Projekts erzeugen, nämlich ein <strong>camunda-bpm-scenario-testing.html</strong>. Dieses kann man öffnen und selbst sehen, dass unser Test hier alle Flow Nodes abgedeckt hat:</p>

<figure>
    
    
    
    
    
    
    
    <img src='https://plexiti.github.io/plexiti-test/de/../en/blog/2016/09/img/process-test-coverage.png' >
</figure>



<p>Gratulation zur Erzielung einer 100% Flow Node Test Coverage!? Nunja, man sieht hier, dass alle Messtechniken so ihre Limits haben, zumal wenn Menschen beginnen sich ihnen anzupassen! <i class='fa fa-smile-o' aria-hidden='true'></i> Scherz beiseite, ich werde schon bald mit weiteren Posts zu diesem Thema fortsetzen, und dabei jeweils auf einen bestimmten Aspekt des Testens mithilfe von &ldquo;Assert Scenario&rdquo; fokussieren.</p>

<h1 id="fork-it-on-github">Fork it on Github!</h1>

<p>Ich habe das ganze kleine Beispiel hier übrigens auch auf <a href="https://github.com/martinschimak/camunda-bpm-scenario-testing">GitHub</a> gepusht! Ich wünsche fröhliches Scenario Testing! <i class='fa fa-smile-o' aria-hidden='true'></i></p>

                              </div>
                         </article>
                         
                         <div id='disqus'></div>
                         <div id='disqus_thread'></div>
                         <script>
                              var disqus_config = function () {
                                   this.page.url = 'http:\/\/plexiti.com\/de\/blog\/2016\/09\/get-started-with-camunda-bpm-assert-scenario\/';
                                   this.page.identifier = '\/de\/blog\/2016\/09\/get-started-with-camunda-bpm-assert-scenario\/';
                                   this.page.title = 'Loslegen mit Camunda BPM Assert Scenario';
                                   this.language = "de";
                              };
                              (function() {
                                   var d = document, s = d.createElement('script');
                                   s.src = '//plexiti.disqus.com/embed.js';
                                   s.setAttribute('data-timestamp', +new Date());
                                   (d.head || d.body).appendChild(s);
                              })();
                         </script>
                         
                    </div>
                    <div class='col-md-4 hidden-sm hidden-xs'>
                         <div class='bs-docs-sidebar hidden-print affix-top' role='complementary' data-spy='affix' data-offset-top='318' data-offset-bottom='405'>
                              <nav id="TableOfContents">
<ul>
<li><a href="#die-motivationen-hinter-assert-scenario">Die Motivationen hinter &ldquo;Assert Scenario&rdquo;</a></li>
<li><a href="#ein-erstes-kleines-projekt-um-loslegen-zu-können">Ein erstes kleines Projekt um loslegen zu können</a></li>
<li><a href="#fork-it-on-github">Fork it on Github!</a></li>
</ul>
</nav>
                         </div>
                    </div>
                    <script type='text/javascript'>
                         if($("#TableOfContents").length === 0) {
                              $('.bs-docs-sidebar').each(function(idx, value) {
                                   $(value).append("<nav id='TableOfContents'><ul></ul></nav>");
                              });
                         }
                         $('#TableOfContents ul').each(function() {
                              this.className = "nav";
                         });
                         
                         var numbers = Math.ceil( 641  /  184 );
                         $('#TableOfContents ul').prepend("<li><a href='#post'><i class='fa fa-hand-o-right' aria-hidden='true'></i> Lies\x27 diesen Beitrag in ca. <span class='read-the-discussion de'><b>" + numbers + "<i class='pl'></i></b></span>&nbsp;...</a></li>");
                         
                         $('#TableOfContents ul').append("<li class='disqus_link'><a href='#disqus'><i class='fa fa-comments'></i> ... und diskutier\x27 mit! <span class='disqus-comment-count de' data-disqus-identifier='/de\/blog\/2016\/09\/get-started-with-camunda-bpm-assert-scenario\/'></span></a></li>");
                         
                    </script>
                    <script type='text/javascript'>
                         $('#TableOfContents a').click(function() {
                              var href = $.attr(this, 'href');
                              href = href.replace(/:/g, '\\:');
                              $('html, body').animate({
                                   scrollTop: jQuery(href).offset().top
                              }, 500, function () {
                                   window.location.hash = href;
                              });
                              return false;
                         });
                    </script>
               </div>
          </div>
     </section>
     <footer>
  <section class='twitter_feed_wrapper'>
    <div class='container'>
      <div class='row'>
        <div class='twitter_feed_icon col-sm-1 col-md-1'><a href='https://twitter.com/MartinSchimak/'><i class='fa fa-twitter'></i></a></div>
        <div class='col-sm-11 col-md-11'>
          <blockquote>
            <p>Dem Business Programmer geht&rsquo;s um Apps und API&rsquo;s, um Anforderungen und Modelle, Datenstrukturen und Algorithmen. Er möchte Fachexperten verstehen, alles auf das Wesentliche reduzieren und in ausführbare Software verwandeln. Aber im Kern geht es ihm um menschliche Motivationen und Ziele, den Sinn und Zweck des Programmierens.</p>
            <cite><a href='https://twitter.com/MartinSchimak/'>@MartinSchimak</a></cite>
          </blockquote>
        </div>
      </div>
    </div>
  </section>
  <section class='copyright'>
    <div class='container'>
        <div class='row'>
            <div class='col-sm-6 col-md-6'></div>
            <div class='text-right col-sm-6 col-md-6'> Copyright &copy; <script>document.write(moment().format('YYYY'))</script> <a href='https://plexiti.github.io/plexiti-test/de/about'>plexiti GmbH</a> - All rights reserved.</div>
        </div>
    </div>
</section>

</footer>

</div>
<script>window.jQuery || document.write('<script src=\'https:\/\/plexiti.github.io\/plexiti-test\/de\/js\/jquery-1.9.0.min.js\'><\/script>')</script>
<script src='https://plexiti.github.io/plexiti-test/de/twitter-bootstrap/js/bootstrap.min.js' type='text/javascript'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/modernizr.custom.48287.js'></script>
<script src='https://plexiti.github.io/plexiti-test/de/js/woothemes-FlexSlider-06b12f8/jquery.flexslider-min.js'></script>
<script src='https://plexiti.github.io/plexiti-test/de/js/prettyPhoto_3.1.5/jquery.prettyPhoto.js' type='text/javascript' charset='utf-8'></script>
<script src='https://plexiti.github.io/plexiti-test/de/js/isotope/jquery.isotope.min.js' type='text/javascript'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/jquery.ui.totop.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/easing.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/wow.min.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/snap.svg-min.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/restart_theme.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/de/js/collapser.js'></script>
<script id='dsq-count-scr' src='//plexiti.disqus.com/count.js' async></script>

<script>
    setCookie('lang', 'de', 365)
</script>
</body>
</html>

