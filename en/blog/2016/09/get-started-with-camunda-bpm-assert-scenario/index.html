<!doctype html>
<html lang='en'>
<head>
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,600italic,700,700italic,300italic' rel='stylesheet' type='text/css'>
  <meta charset='utf-8'>
  
  <title>Get Started with Camunda BPM Assert Scenario</title>
  
    <link href='https://plexiti.github.io/plexiti-test/en/blog/index.xml' rel='alternate' type='application/rss+xml' title='plexiti - the business programmer blog' />
  
    <link href='https://plexiti.github.io/plexiti-test/en/blog/index.xml' rel='home' type='application/rss+xml' title='plexiti - the business programmer blog' />
  
  <meta name='apple-mobile-web-app-capable' content='yes'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link href='https://plexiti.github.io/plexiti-test/en/animate.css' rel='stylesheet' type='text/css'>
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/en/js/woothemes-FlexSlider-06b12f8/flexslider.css' type='text/css' media='screen'>
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/en/js/prettyPhoto_3.1.5/prettyPhoto.css' type='text/css' media='screen'>
  <link href='https://plexiti.github.io/plexiti-test/en/style.css' rel='stylesheet' type='text/css'>

  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/en/fonts/bariol/plexiti-bariol.css' media='screen' />
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/en/fonts/font-awesome/css/font-awesome.min.css' media='screen'>
  <script src='//code.jquery.com/jquery-latest.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/modernizr.custom.48287.js'></script>
  
  <link rel='shortcut icon' type='image/x-icon' href='https://plexiti.github.io/plexiti-test/en/favicon.ico' />
  <link rel='apple-touch-icon-precomposed' sizes='114x114' href='https://plexiti.github.io/plexiti-test/en/apple-touch-icon-114x114-precomposed.png'>
  <link rel='apple-touch-icon-precomposed' sizes='72x72' href='https://plexiti.github.io/plexiti-test/en/apple-touch-icon-72x72-precomposed.png'>
  <link rel='apple-touch-icon-precomposed' href='https://plexiti.github.io/plexiti-test/en/apple-touch-fa-57x57-precomposed.png'>

  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/moment/moment-with-locales.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/bpmn-js/bpmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/cmmn-js/cmmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/dmn-js/dmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/plexiti.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/lang.js'></script>

  <link href='https://plexiti.github.io/plexiti-test/en/css/plexiti.css' rel='stylesheet' type='text/css'>
  <link href='https://plexiti.github.io/plexiti-test/en/js/dmn-js/css/dmn-js.css' rel='stylesheet' type='text/css'>
  <link href='https://plexiti.github.io/plexiti-test/en/js/rainbow/rainbow-github.css' rel="stylesheet" type="text/css">

</head>
<body data-spy='scroll' data-target='#TableOfContents' data-offset='50'>
<header>
  <div class='top-bg-color-bar'></div>
  <div class='container'>
    <div class='navbar navbar-default' role='navigation'>
      <div class='navbar-header'>
        <a class='navbar-brand' href='https://plexiti.github.io/plexiti-test/en/'>
          <img src='https://plexiti.github.io/plexiti-test/en/img/logo.png' style='width: 250px; height: 96px' title='plexiti'>
          <span class='logo_subtitle' style='font-size: 13pt;'>the business programmer blog</span>
        </a>
      </div>
      <div class='collapse navbar-collapse'>
        <ul class='nav pull-right navbar-nav'>
          
          
            <li><a href='https://plexiti.github.io/plexiti-test/en/blog/'>Blog</a></li>
          
            <li><a href='https://plexiti.github.io/plexiti-test/en/about/'>About</a></li>
          
        </ul>
      </div>
    </div>
    <div id="social_media_wrapper">
      
      
      
        
        <a href='.' title='This page is available in english.'><i class="fa">en</i></a>
        
      
    </div>
  </div>
</header>

<div class='main' id='post'>
     <section class='hgroup'>
          <div class='container'>
               <h1>Get Started with Camunda BPM Assert Scenario</h1>
               <h2>This blog post is the first one in a series of blog posts discussing the new Camunda BPM community extension project.<span style='float:right'><script>document.write(moment('2016-09-15').locale('en').format('LL'))</script></span></h2>
          </div>
     </section>
     <section>
          <div class='container'>
               <div class='row'>
                    <div id='leftcol' class='col-sm-12 col-md-8' role='main'>
                         <article class='post'>
                              <div class='post_content'>
                                   

<p>I am really happy to announce the <strong>Maven Central</strong> Release of the new Camunda BPM community extension project <a href="https://github.com/camunda/camunda-bpm-assert-scenario">Camunda BPM Assert Scenario</a>. I plan to write a series of little blog posts to explain it in more detail, starting today with a really small project just meant to get you started. But let me first write three paragraphs about the &ldquo;bigger picture&rdquo; and motivations behind this development. <i class='fa fa-smile-o' aria-hidden='true'></i></p>

<h1 id="the-motivations-behind-assert-scenario">The motivations behind &ldquo;Assert Scenario&rdquo;</h1>

<p>Camunda BPM Assert Scenario enables much <strong>faster process development</strong>, removing the need to adapt unit test suites for large executable models over and over again. When using it I experience that just those tests break that I want to break: when I change the &ldquo;business relevant&rdquo; aspect under test or <strong>what</strong> the process achieves. However, the test suites do not break at all when I just refactor a model&rsquo;s inner logic or <strong>how</strong> I achieve the desired business semantics.</p>

<p>Furthermore, Camunda BPM Assert Scenario enables realistic <strong>unit testing for time-related process behaviour</strong>: by deferring actions and &ldquo;fast-forwarding&rdquo; test scenarios into their &ldquo;process future&rdquo;, one can check how several processes and call activities behave together. One however always remains in the driver&rsquo;s seat: Camunda BPM Assert Scenario works in a single-treaded, easily mockable and controllable unit test environment.</p>

<h1 id="a-first-little-project-to-get-you-started">A first little project to get you started</h1>

<p><strong>Step 1</strong>: Create a Camunda Maven Project, I e.g. use here the Camunda Maven Archetype to create one:</p>

<pre><code data-language=''>mvn archetype:generate -DinteractiveMode=false -DarchetypeRepository=https://app.camunda.com/nexus/content/repositories/camunda-bpm -DarchetypeGroupId=org.camunda.bpm.archetype -DarchetypeArtifactId=camunda-archetype-servlet-war -DarchetypeVersion=7.5.0 -DgroupId=org.example.camunda.bpm -DartifactId=camunda-bpm-scenario-testing -Dversion=0.1-SNAPSHOT -Dpackage=org.example.camunda.bpm.scenario</code></pre>
<script src='https://plexiti.github.io/plexiti-test/en/js/rainbow/rainbow-custom.min.js'></script>


<p><strong>Step 2</strong>: Set the language level in your pom to Java 1.8. Note that this is not &ldquo;necessary&rdquo; to use &ldquo;Assert Scenario&rdquo;, but it&rsquo;s definitely more fun <strong>with</strong> lambda expressions. <i class='fa fa-smile-o' aria-hidden='true'></i></p>

<pre><code data-language='xml'>&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</code></pre>
<script src='https://plexiti.github.io/plexiti-test/en/js/rainbow/rainbow-custom.min.js'></script>


<p><strong>Step 3</strong>: Add the Maven Dependency for &ldquo;Assert Scenario&rdquo; to your projects pom.xml</p>

<pre><code data-language='xml'>&lt;dependency&gt;
    &lt;groupId&gt;org.camunda.bpm.extension&lt;/groupId&gt;
    &lt;artifactId&gt;camunda-bpm-assert-scenario&lt;/artifactId&gt;
    &lt;version&gt;0.1&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
<script src='https://plexiti.github.io/plexiti-test/en/js/rainbow/rainbow-custom.min.js'></script>


<p>Furthermore, add Mockito to your project dependencies. If you prefer another mocking framework, feel free to use it instead, but the example shown below will make use of Mockito.</p>

<pre><code data-language='xml'>&lt;dependency&gt;
  &lt;groupId&gt;org.mockito&lt;/groupId&gt;
  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
  &lt;version&gt;1.10.19&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
<script src='https://plexiti.github.io/plexiti-test/en/js/rainbow/rainbow-custom.min.js'></script>


<p><strong>Step 4</strong>: Open the <strong>process.bpmn</strong> in the <strong>src/main/resources</strong> folder by means of Camunda Modeler and add a few User Tasks in between the start and the end event. I did e.g. the following:</p>


<div class='bpmn' bpmn='https://plexiti.github.io/plexiti-test/en/./blog/2016/09/src/process.bpmn'>
</div>

<p>Alternatively, you may want to download my <a href="../src/process.bpmn" download="process.bpmn">process.bpmn</a> shown here.</p>

<p><strong>Step 5</strong>: Open the <strong>InMemoryH2Test.java</strong> in the <strong>src/test/java</strong> folder. Adapt the <strong>testHappyPath()</strong> method:</p>

<pre><code data-language='java'>@Test
@Deployment(resources = &#34;process.bpmn&#34;)
public void testHappyPath() {

  // GIVEN a process scenario... (this one just completes all user tasks)
  ProcessScenario process = Mockito.mock(ProcessScenario.class);
  Mockito.when(process.waitsAtUserTask(Mockito.anyString())).thenReturn((task) -&gt; task.complete());

  // WHEN we run the scenario
  Scenario scenario = Scenario.run(process).startByKey(&#34;camunda-bpm-scenario-testing&#34;).execute();

  // THEN we assume to reach the end event
  Mockito.verify(process).hasFinished(&#34;EndEventProcessEnded&#34;);

  // AND we want to visualise the process instance&#39;s history
  ProcessTestCoverage.calculate(scenario.instance(process), rule.getProcessEngine());

}</code></pre>
<script src='https://plexiti.github.io/plexiti-test/en/js/rainbow/rainbow-custom.min.js'></script>


<p>While I would not see it as a &ldquo;best practice&rdquo; to simply &ldquo;complete&rdquo; all open user tasks as shown in this code snippet, it can be a helpful technique to get started quickly with your process model tests. Execute this test now! It should run the process instance from start event to end event and produce an HTML output in the project&rsquo;s <strong>target/process-test-coverage</strong> folder named <strong>camunda-bpm-scenario-testing.html</strong>. Open it and see yourself that our test covered all flow nodes:</p>

<figure>
    
    
    
    
    
    
    
    <img src='https://plexiti.github.io/plexiti-test/en/./blog/2016/09/img/process-test-coverage.png' >
</figure>



<p>Congratulations, you already reached 100% flow node coverage!? Well, we see here that all measuring techniques have their limits, in particular if people adapt to them! <i class='fa fa-smile-o' aria-hidden='true'></i> All jokes aside, I will soon continue to post more on the topic, focusing on particular aspects of process testing by means of &ldquo;Assert Scenario&rdquo;.</p>

<h1 id="fork-it-on-github">Fork it on Github!</h1>

<p>I pushed the whole example described here to <a href="https://github.com/martinschimak/camunda-bpm-scenario-testing">GitHub</a>, too! Happy scenario testing! <i class='fa fa-smile-o' aria-hidden='true'></i></p>

                              </div>
                         </article>
                         
                    </div>
                    <div class='col-md-4 hidden-sm hidden-xs'>
                         <div class='bs-docs-sidebar hidden-print affix-top' role='complementary' data-spy='affix' data-offset-top='318' data-offset-bottom='405'>
                              <nav id="TableOfContents">
<ul>
<li><a href="#the-motivations-behind-assert-scenario">The motivations behind &ldquo;Assert Scenario&rdquo;</a></li>
<li><a href="#a-first-little-project-to-get-you-started">A first little project to get you started</a></li>
<li><a href="#fork-it-on-github">Fork it on Github!</a></li>
</ul>
</nav>
                         </div>
                    </div>
                    <script type='text/javascript'>
                         if($("#TableOfContents").length === 0) {
                              $('.bs-docs-sidebar').each(function(idx, value) {
                                   $(value).append("<nav id='TableOfContents'><ul></ul></nav>");
                              });
                         }
                         $('#TableOfContents ul').each(function() {
                              this.className = "nav";
                         });
                         
                         var numbers = Math.ceil( 594  /  184 );
                         $('#TableOfContents ul').prepend("<li><a href='#post'><i class='fa fa-hand-o-right' aria-hidden='true'></i> Read this post in about <span class='read-the-discussion en'><b>" + numbers + "<i class='pl'></i></b></span>&nbsp;...</a></li>");
                         
                    </script>
                    <script type='text/javascript'>
                         $('#TableOfContents a').click(function() {
                              var href = $.attr(this, 'href');
                              href = href.replace(/:/g, '\\:');
                              $('html, body').animate({
                                   scrollTop: jQuery(href).offset().top
                              }, 500, function () {
                                   window.location.hash = href;
                              });
                              return false;
                         });
                    </script>
               </div>
          </div>
     </section>
     <footer>
  <section class='twitter_feed_wrapper'>
    <div class='container'>
      <div class='row'>
        <div class='twitter_feed_icon col-sm-1 col-md-1'><a href='https://twitter.com/MartinSchimak/'><i class='fa fa-twitter'></i></a></div>
        <div class='col-sm-11 col-md-11'>
          <blockquote>
            <p>Business programming is about apps and api&rsquo;s, requirements and models, data structures and algorithms. It&rsquo;s about understanding domain experts, reducing everything to the essentials and implementing it as executable software. But at it&rsquo;s core, it&rsquo;s about human motivations and goals, the purpose and <strong>„business“</strong> of <strong>„programming“</strong>.</p>
            <cite><a href='https://twitter.com/MartinSchimak/'>@MartinSchimak</a></cite>
          </blockquote>
        </div>
      </div>
    </div>
  </section>
  <section class='copyright'>
    <div class='container'>
        <div class='row'>
            <div class='col-sm-6 col-md-6'></div>
            <div class='text-right col-sm-6 col-md-6'> Copyright &copy; <script>document.write(moment().format('YYYY'))</script> <a href='https://plexiti.github.io/plexiti-test/en/about'>plexiti GmbH</a> - All rights reserved.</div>
        </div>
    </div>
</section>

</footer>

</div>
<script>window.jQuery || document.write('<script src=\'https:\/\/plexiti.github.io\/plexiti-test\/en\/js\/jquery-1.9.0.min.js\'><\/script>')</script>
<script src='https://plexiti.github.io/plexiti-test/en/twitter-bootstrap/js/bootstrap.min.js' type='text/javascript'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/modernizr.custom.48287.js'></script>
<script src='https://plexiti.github.io/plexiti-test/en/js/woothemes-FlexSlider-06b12f8/jquery.flexslider-min.js'></script>
<script src='https://plexiti.github.io/plexiti-test/en/js/prettyPhoto_3.1.5/jquery.prettyPhoto.js' type='text/javascript' charset='utf-8'></script>
<script src='https://plexiti.github.io/plexiti-test/en/js/isotope/jquery.isotope.min.js' type='text/javascript'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/jquery.ui.totop.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/easing.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/wow.min.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/snap.svg-min.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/restart_theme.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/collapser.js'></script>
<script id='dsq-count-scr' src='//plexiti.disqus.com/count.js' async></script>

<script>
    setCookie('lang', 'en', 365)
</script>
</body>
</html>

