<!doctype html>
<html lang='en'>
<head>
  <script src='https://plexiti.github.io/plexiti-test/en/js/lang.js'></script>
  <script>
    redirect2language('en', 'https:\/\/plexiti.github.io\/plexiti-test\/en\/');
  </script>
  <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,600italic,700,700italic,300italic' rel='stylesheet' type='text/css'>
  <meta charset='utf-8'>
  
  <title>Get Started with Camunda BPM Assert Scenario</title>
  
    <link href='https://plexiti.github.io/plexiti-test/en/blog/index.xml' rel='alternate' type='application/rss+xml' title='plexiti - the business programmer blog' />
  
    <link href='https://plexiti.github.io/plexiti-test/en/blog/index.xml' rel='home' type='application/rss+xml' title='plexiti - the business programmer blog' />
  
  <meta name='apple-mobile-web-app-capable' content='yes'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link href='https://plexiti.github.io/plexiti-test/en/animate.css' rel='stylesheet' type='text/css'>
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/en/js/woothemes-FlexSlider-06b12f8/flexslider.css' type='text/css' media='screen'>
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/en/js/prettyPhoto_3.1.5/prettyPhoto.css' type='text/css' media='screen'>
  <link href='https://plexiti.github.io/plexiti-test/en/style.css' rel='stylesheet' type='text/css'>

  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/en/fonts/bariol/plexiti-bariol.css' media='screen' />
  <link rel='stylesheet' href='https://plexiti.github.io/plexiti-test/en/fonts/font-awesome/css/font-awesome.min.css' media='screen'>
  <script src='//code.jquery.com/jquery-latest.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/modernizr.custom.48287.js'></script>
  
  <link rel='shortcut icon' type='image/x-icon' href='https://plexiti.github.io/plexiti-test/en/favicon.ico' />
  <link rel='apple-touch-icon-precomposed' sizes='114x114' href='https://plexiti.github.io/plexiti-test/en/apple-touch-icon-114x114-precomposed.png'>
  <link rel='apple-touch-icon-precomposed' sizes='72x72' href='https://plexiti.github.io/plexiti-test/en/apple-touch-icon-72x72-precomposed.png'>
  <link rel='apple-touch-icon-precomposed' href='https://plexiti.github.io/plexiti-test/en/apple-touch-fa-57x57-precomposed.png'>

  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/moment/moment-with-locales.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/bpmn-js/bpmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/cmmn-js/cmmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/dmn-js/dmn-viewer.min.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/plexiti.js'></script>
  <script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/lang.js'></script>

  <link href='https://plexiti.github.io/plexiti-test/en/css/plexiti.css' rel='stylesheet' type='text/css'>
  <link href='https://plexiti.github.io/plexiti-test/en/js/dmn-js/css/dmn-js.css' rel='stylesheet' type='text/css'>
  <link href='https://plexiti.github.io/plexiti-test/en/js/rainbow/rainbow-github.css' rel="stylesheet" type="text/css">

</head>
<body data-spy='scroll' data-target='#TableOfContents' data-offset='50'>
<header>
  <div class='top-bg-color-bar'></div>
  <div class='container'>
    <div class='navbar navbar-default' role='navigation'>
      <div class='navbar-header'>
        <a class='navbar-brand' href='https://plexiti.github.io/plexiti-test/en/'>
          <img src='https://plexiti.github.io/plexiti-test/en/img/logo.png' style='width: 250px; height: 96px' title='plexiti'>
          <span class='logo_subtitle' style='font-size: 13pt;'>the business programmer blog</span>
        </a>
      </div>
      <div class='collapse navbar-collapse'>
        <ul class='nav pull-right navbar-nav'>
          
          
            <li><a href='https://plexiti.github.io/plexiti-test/en/blog/'>Blog</a></li>
          
            <li><a href='https://plexiti.github.io/plexiti-test/en/about/'>About</a></li>
          
        </ul>
      </div>
    </div>
    <div id="social_media_wrapper">
      
      
      
        
        <a href='https://plexiti.github.io/plexiti-test/en/../de/blog/2016/09/get-started-with-camunda-bpm-assert-scenario/' title='Diese Seite ist auf Deutsch abrufbar.'><i class="fa">de</i></a>
        
        <a href='.' title='This page is available in english.'><i class="fa">en</i></a>
        
      
    </div>
  </div>
</header>

<div class='main' id='post'>
     <section class='hgroup'>
          <div class='container'>
               <h1>Get Started with Camunda BPM Assert Scenario</h1>
               <h2>This blog post is the first one in a small series of blog posts about &ldquo;scenario&rdquo;-testing.<span style='float:right'><script>document.write(moment('2016-09-17').locale('en').format('LL'))</script></span></h2>
          </div>
     </section>
     <section>
          <div class='container'>
               <div class='row'>
                    <div id='leftcol' class='col-sm-12 col-md-8' role='main'>
                         <article class='post'>
                              <div class='post_content'>
                                   

<p>I am really happy to announce the <strong>Maven Central</strong> Release of the new Camunda BPM community extension project <a href="https://github.com/camunda/camunda-bpm-assert-scenario">Camunda BPM Assert Scenario</a>. I also showed it on Camunda&rsquo;s awesome Community Day at their headquarters two days ago. And today I pushed a Getting Started project to <a href="https://github.com/martinschimak/camunda-bpm-scenario-testing">GitHub</a>.</p>

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Now 3 <a href="https://twitter.com/hashtag/camunda?src=hash">#camunda</a> community extensions in 15 minutes from <a href="https://twitter.com/MartinSchimak">@MartinSchimak</a> <a href="https://t.co/xq9ycBW9qo">pic.twitter.com/xq9ycBW9qo</a></p>&mdash; Bernd Ruecker (@berndruecker) <a href="https://twitter.com/berndruecker/status/776397191929851904">September 15, 2016</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<h1 id="a-first-little-project-to-get-you-started">A first little project to get you started</h1>

<p>Here&rsquo;s what was needed to be done for the <a href="https://github.com/martinschimak/camunda-bpm-scenario-testing">getting started project</a>:</p>

<p><strong>Step 1</strong>: Create a Camunda Maven Project, I e.g. use here the Camunda Maven Archetype to create one:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>mvn archetype:generate -DinteractiveMode<span style="color: #666666">=</span><span style="color: #AA22FF">false</span> -DarchetypeRepository<span style="color: #666666">=</span>https://app.camunda.com/nexus/content/repositories/camunda-bpm -DarchetypeGroupId<span style="color: #666666">=</span>org.camunda.bpm.archetype -DarchetypeArtifactId<span style="color: #666666">=</span>camunda-archetype-servlet-war -DarchetypeVersion<span style="color: #666666">=</span>7.5.0 -DgroupId<span style="color: #666666">=</span>org.example.camunda.bpm -DartifactId<span style="color: #666666">=</span>camunda-bpm-scenario-testing -Dversion<span style="color: #666666">=</span>0.1-SNAPSHOT -Dpackage<span style="color: #666666">=</span>org.example.camunda.bpm.scenario
</pre></div>

<p><strong>Step 2</strong>: Set the language level in your pom to Java 1.8. Note that this is not &ldquo;necessary&rdquo; to use &ldquo;Assert Scenario&rdquo;, but it&rsquo;s definitely more fun <strong>with</strong> lambda expressions. <i class='fa fa-smile-o' aria-hidden='true'></i></p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">&lt;maven.compiler.source&gt;</span>1.8<span style="color: #008000; font-weight: bold">&lt;/maven.compiler.source&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;maven.compiler.target&gt;</span>1.8<span style="color: #008000; font-weight: bold">&lt;/maven.compiler.target&gt;</span>
</pre></div>

<p><strong>Step 3</strong>: Add the Maven Dependency for &ldquo;Assert Scenario&rdquo; to your projects pom.xml</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">&lt;dependency&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;groupId&gt;</span>org.camunda.bpm.extension<span style="color: #008000; font-weight: bold">&lt;/groupId&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;artifactId&gt;</span>camunda-bpm-assert-scenario<span style="color: #008000; font-weight: bold">&lt;/artifactId&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;version&gt;</span>0.1<span style="color: #008000; font-weight: bold">&lt;/version&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;scope&gt;</span>test<span style="color: #008000; font-weight: bold">&lt;/scope&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/dependency&gt;</span>
</pre></div>

<p>Furthermore, add Mockito to your project dependencies. If you prefer another mocking framework, feel free to use it instead, but the example shown below will make use of Mockito.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">&lt;dependency&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;groupId&gt;</span>org.mockito<span style="color: #008000; font-weight: bold">&lt;/groupId&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;artifactId&gt;</span>mockito-core<span style="color: #008000; font-weight: bold">&lt;/artifactId&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;version&gt;</span>1.10.19<span style="color: #008000; font-weight: bold">&lt;/version&gt;</span>
  <span style="color: #008000; font-weight: bold">&lt;scope&gt;</span>test<span style="color: #008000; font-weight: bold">&lt;/scope&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/dependency&gt;</span>
</pre></div>

<p><strong>Step 4</strong>: Open the <strong>process.bpmn</strong> in the <strong>src/main/resources</strong> folder by means of Camunda Modeler and add a few User Tasks in between the start and the end event. I did e.g. the following:</p>


<div class='bpmn' bpmn='https://plexiti.github.io/plexiti-test/en/./blog/2016/09/src/process.bpmn'>
</div>

<p>Alternatively, you may want to download my <a href="../src/process.bpmn" download="process.bpmn">process.bpmn</a> shown here.</p>

<p><strong>Step 5</strong>: Open the <strong>InMemoryH2Test.java</strong> in the <strong>src/test/java</strong> folder. Adapt the <strong>testHappyPath()</strong> method:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #AA22FF">@Test</span>
<span style="color: #AA22FF">@Deployment</span><span style="color: #666666">(</span>resources <span style="color: #666666">=</span> <span style="color: #BB4444">&quot;process.bpmn&quot;</span><span style="color: #666666">)</span>
<span style="color: #AA22FF; font-weight: bold">public</span> <span style="color: #00BB00; font-weight: bold">void</span> <span style="color: #00A000">testHappyPath</span><span style="color: #666666">()</span> <span style="color: #666666">{</span>

  <span style="color: #008800; font-style: italic">// GIVEN a process scenario... (this one just completes all user tasks)</span>
  ProcessScenario process <span style="color: #666666">=</span> Mockito<span style="color: #666666">.</span><span style="color: #BB4444">mock</span><span style="color: #666666">(</span>ProcessScenario<span style="color: #666666">.</span><span style="color: #BB4444">class</span><span style="color: #666666">);</span>
  Mockito<span style="color: #666666">.</span><span style="color: #BB4444">when</span><span style="color: #666666">(</span>process<span style="color: #666666">.</span><span style="color: #BB4444">waitsAtUserTask</span><span style="color: #666666">(</span>Mockito<span style="color: #666666">.</span><span style="color: #BB4444">anyString</span><span style="color: #666666">())).</span><span style="color: #BB4444">thenReturn</span><span style="color: #666666">((</span>task<span style="color: #666666">)</span> <span style="color: #666666">-&gt;</span> task<span style="color: #666666">.</span><span style="color: #BB4444">complete</span><span style="color: #666666">());</span>

  <span style="color: #008800; font-style: italic">// WHEN we run the scenario</span>
  Scenario scenario <span style="color: #666666">=</span> Scenario<span style="color: #666666">.</span><span style="color: #BB4444">run</span><span style="color: #666666">(</span>process<span style="color: #666666">).</span><span style="color: #BB4444">startByKey</span><span style="color: #666666">(</span><span style="color: #BB4444">&quot;camunda-bpm-scenario-testing&quot;</span><span style="color: #666666">).</span><span style="color: #BB4444">execute</span><span style="color: #666666">();</span>

  <span style="color: #008800; font-style: italic">// THEN we assume to reach the end event</span>
  Mockito<span style="color: #666666">.</span><span style="color: #BB4444">verify</span><span style="color: #666666">(</span>process<span style="color: #666666">).</span><span style="color: #BB4444">hasFinished</span><span style="color: #666666">(</span><span style="color: #BB4444">&quot;EndEventProcessEnded&quot;</span><span style="color: #666666">);</span>

  <span style="color: #008800; font-style: italic">// AND we want to visualise the process instance&#39;s history</span>
  ProcessTestCoverage<span style="color: #666666">.</span><span style="color: #BB4444">calculate</span><span style="color: #666666">(</span>scenario<span style="color: #666666">.</span><span style="color: #BB4444">instance</span><span style="color: #666666">(</span>process<span style="color: #666666">),</span> rule<span style="color: #666666">.</span><span style="color: #BB4444">getProcessEngine</span><span style="color: #666666">());</span>

<span style="color: #666666">}</span>
</pre></div>

<p>While I would not see it as a &ldquo;best practice&rdquo; to simply &ldquo;complete&rdquo; all open user tasks as shown in this code snippet, it can be a helpful technique to get started quickly with your process model tests. So let&rsquo;s execute this test now!</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>mvn clean <span style="color: #AA22FF">test</span>
</pre></div>

<p>It will run the process instance from start event to end event and produce an HTML in the project&rsquo;s <strong>target/process-test-coverage</strong> folder named <strong>camunda-bpm-scenario-testing.html</strong>. Open it and see yourself that our test covered all flow nodes:</p>

<figure>
    
    
    
    
    
    
    
    <img src='https://plexiti.github.io/plexiti-test/en/./blog/2016/09/img/process-test-coverage.png' >
</figure>



<p>Congratulations, you already reached 100% flow node coverage!? Well, we see here that all measuring techniques have their limits, in particular if people adapt to them! <i class='fa fa-smile-o' aria-hidden='true'></i> All jokes aside, I will soon continue to post more on the topic, focusing on particular aspects of process testing by means of &ldquo;Assert Scenario&rdquo;.</p>

<h1 id="the-motivations-behind-assert-scenario">The motivations behind &ldquo;Assert Scenario&rdquo;</h1>

<p>Camunda BPM Assert Scenario enables much <strong>faster process development</strong>, removing the need to adapt unit test suites for large executable models over and over again. When using it I experience that just those tests break that I want to break: when I change the &ldquo;business relevant&rdquo; aspect under test or <strong>what</strong> the process achieves. However, the test suites do not break at all when I just refactor a model&rsquo;s inner logic or <strong>how</strong> I achieve the desired business semantics.</p>

<p>Furthermore, Camunda BPM Assert Scenario enables realistic <strong>unit testing for time-related process behaviour</strong>: by deferring actions and &ldquo;fast-forwarding&rdquo; test scenarios into their &ldquo;process future&rdquo;, one can check how several processes and call activities behave together. One however always remains in the driver&rsquo;s seat: Camunda BPM Assert Scenario works in a single-treaded, easily mockable and controllable unit test environment.</p>

<p>Happy scenario testing! <i class='fa fa-smile-o' aria-hidden='true'></i></p>

                              </div>
                         </article>
                         
                         <div id='disqus'></div>
                         <div id='disqus_thread'></div>
                         <script>
                              var disqus_config = function () {
                                   this.page.url = 'http:\/\/plexiti.com\/en\/blog\/2016\/09\/get-started-with-camunda-bpm-assert-scenario\/';
                                   this.page.identifier = '\/en\/blog\/2016\/09\/get-started-with-camunda-bpm-assert-scenario\/';
                                   this.page.title = 'Get Started with Camunda BPM Assert Scenario';
                                   this.language = "en";
                              };
                              (function() {
                                   var d = document, s = d.createElement('script');
                                   s.src = '//plexiti.disqus.com/embed.js';
                                   s.setAttribute('data-timestamp', +new Date());
                                   (d.head || d.body).appendChild(s);
                              })();
                         </script>
                         
                    </div>
                    <div class='col-md-4 hidden-sm hidden-xs'>
                         <div class='bs-docs-sidebar hidden-print affix-top' role='complementary' data-spy='affix' data-offset-top='318' data-offset-bottom='405'>
                              <nav id="TableOfContents">
<ul>
<li><a href="#a-first-little-project-to-get-you-started">A first little project to get you started</a></li>
<li><a href="#the-motivations-behind-assert-scenario">The motivations behind &ldquo;Assert Scenario&rdquo;</a></li>
</ul>
</nav>
                         </div>
                    </div>
                    <script type='text/javascript'>
                         if($("#TableOfContents").length === 0) {
                              $('.bs-docs-sidebar').each(function(idx, value) {
                                   $(value).append("<nav id='TableOfContents'><ul></ul></nav>");
                              });
                         }
                         $('#TableOfContents ul').each(function() {
                              this.className = "nav";
                         });
                         
                         var numbers = Math.ceil( 594  /  184 );
                         $('#TableOfContents ul').prepend("<li><a href='#post'><i class='fa fa-hand-o-right' aria-hidden='true'></i> Read this post in about <span class='read-the-discussion en'><b>" + numbers + "<i class='pl'></i></b></span>&nbsp;...</a></li>");
                         
                         $('#TableOfContents ul').append("<li class='disqus_link'><a href='#disqus'><i class='fa fa-comments'></i> ... and join the discussion! <span class='disqus-comment-count en' data-disqus-identifier='/en\/blog\/2016\/09\/get-started-with-camunda-bpm-assert-scenario\/'></span></a></li>");
                         
                    </script>
                    <script type='text/javascript'>
                         $('#TableOfContents a').click(function() {
                              var href = $.attr(this, 'href');
                              href = href.replace(/:/g, '\\:');
                              $('html, body').animate({
                                   scrollTop: jQuery(href).offset().top
                              }, 500, function () {
                                   window.location.hash = href;
                              });
                              return false;
                         });
                    </script>
               </div>
          </div>
     </section>
     <footer>
  <section class='twitter_feed_wrapper'>
    <div class='container'>
      <div class='row'>
        <div class='twitter_feed_icon col-sm-1 col-md-1'><a href='https://twitter.com/MartinSchimak/'><i class='fa fa-twitter'></i></a></div>
        <div class='col-sm-11 col-md-11'>
          <blockquote>
            <p>What <strong>business programming</strong> is actually all about? Oh well. All the stuff I am going to write about!</p>
            <cite><a href='https://twitter.com/MartinSchimak/'>@MartinSchimak</a></cite>
          </blockquote>
        </div>
      </div>
    </div>
  </section>
  <section class='copyright'>
    <div class='container'>
        <div class='row'>
            <div class='col-sm-6 col-md-6'></div>
            <div class='text-right col-sm-6 col-md-6'> Copyright &copy; <script>document.write(moment().format('YYYY'))</script> <a href='https://plexiti.github.io/plexiti-test/en/about'>plexiti GmbH</a> - All rights reserved.</div>
        </div>
    </div>
</section>

</footer>

</div>
<script>window.jQuery || document.write('<script src=\'https:\/\/plexiti.github.io\/plexiti-test\/en\/js\/jquery-1.9.0.min.js\'><\/script>')</script>
<script src='https://plexiti.github.io/plexiti-test/en/twitter-bootstrap/js/bootstrap.min.js' type='text/javascript'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/modernizr.custom.48287.js'></script>
<script src='https://plexiti.github.io/plexiti-test/en/js/woothemes-FlexSlider-06b12f8/jquery.flexslider-min.js'></script>
<script src='https://plexiti.github.io/plexiti-test/en/js/prettyPhoto_3.1.5/jquery.prettyPhoto.js' type='text/javascript' charset='utf-8'></script>
<script src='https://plexiti.github.io/plexiti-test/en/js/isotope/jquery.isotope.min.js' type='text/javascript'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/jquery.ui.totop.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/easing.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/wow.min.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/snap.svg-min.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/restart_theme.js'></script>
<script type='text/javascript' src='https://plexiti.github.io/plexiti-test/en/js/collapser.js'></script>
<script id='dsq-count-scr' src='//plexiti.disqus.com/count.js' async></script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-34569279-1', 'auto');
    ga('send', 'pageview');
</script>

<script>
    setCookie('lang', 'en', 365)
</script>
</body>
</html>

